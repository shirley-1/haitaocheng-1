"use strict";var gameEngine={ele:null,allbullet:{},allenemy:{},init:function(){return this.ele=document.getElementById("main"),this},start:function(){this.loadding(function(){console.log("游戏加载完毕"),myplane.init().move(),myplane.fire(),gameEngine.listeningKeybord(),gameEngine.createEnemy(),gameEngine.listeningCrash()})},loadding:function(e){var n=document.createElement("div");main.appendChild(n),n.className="logo";var l=document.createElement("div");l.className="load",gameEngine.ele.appendChild(l);var a=["images/loading1.png","images/loading2.png","images/loading3.png"],t=0,i=setInterval(function(){t>=5?(clearInterval(i),gameEngine.ele.removeChild(n),gameEngine.ele.removeChild(l),e()):l.style.background="url("+a[++t%3]+") no-repeat"},500)},listeningKeybord:function(){var e=0,n=0;window.onkeydown=function(l){37==(l=l||event).keyCode?e=-10:39==l.keyCode?e=10:38==l.keyCode?n=-10:40==l.keyCode&&(n=10)},window.onkeyup=function(){e=0,n=0},setInterval(function(){var l=myplane.ele.offsetLeft+e;l<0&&(l=0),l>gameEngine.ele.offsetWidth-myplane.ele.offsetWidth&&(l=gameEngine.ele.offsetWidth-myplane.ele.offsetWidth),myplane.ele.style.left=l+"px",myplane.ele.style.top=myplane.ele.offsetTop+n+"px"},30)},createEnemy:function(){setInterval(function(){Math.random()>.4&&new Enemy(Enemy.prototype.Enemy_Type_Small).init().move()},2e3),setInterval(function(){Math.random()>.6&&new Enemy(Enemy.prototype.Enemy_Type_Middle).init().move()},3e3),setInterval(function(){Math.random()>.5&&new Enemy(Enemy.prototype.Enemy_Type_Large).init().move()},8e3)},listeningCrash:function(){console.log("检测碰撞");var e=!1;setInterval(function(){for(var n in gameEngine.allenemy){for(var l in gameEngine.allbullet)isCrash(gameEngine.allenemy[n].ele,gameEngine.allbullet[l].ele)&&(gameEngine.allbullet[l].boom(),delete gameEngine.allbullet[l],gameEngine.allenemy[n].hurt());!e&&isCrash(gameEngine.allenemy[n].ele,myplane.ele)&&(e=!0,console.log("Game Over"))}},30)}};